xml.instruct!
xml.map :map_file=>"flash/ammap/world.swf", :tl_long=>"-168.49", :tl_lat=>"83.63", :br_long=>"190.3", :br_lat=>"-55.58", :zoom=>"200%" do
  xml << '<areas>
      <area title="AFGHANISTAN" mc_name="AF"></area>
      <area title="ALAND ISLANDS" mc_name="AX"></area>
      <area title="ALBANIA" mc_name="AL"></area>
      <area title="ALGERIA" mc_name="DZ"></area>
      <area title="ANDORRA" mc_name="AD"></area>
      <area title="ANGOLA" mc_name="AO"></area>
      <area title="ANGUILLA" mc_name="AI"></area>
      <area title="ANTIGUA AND BARBUDA" mc_name="AG"></area>
      <area title="ARGENTINA" mc_name="AR"></area>
      <area title="ARMENIA" mc_name="AM"></area>
      <area title="ARUBA" mc_name="AW"></area>
      <area title="AUSTRALIA" mc_name="AU"></area>
      <area title="AUSTRIA" mc_name="AT"></area>
      <area title="AZERBAIJAN" mc_name="AZ"></area>
      <area title="BAHAMAS" mc_name="BS"></area>
      <area title="BAHRAIN" mc_name="BH"></area>
      <area title="BANGLADESH" mc_name="BD"></area>
      <area title="BARBADOS" mc_name="BB"></area>
      <area title="BELARUS" mc_name="BY"></area>
      <area title="BELGIUM" mc_name="BE"></area>
      <area title="BELIZE" mc_name="BZ"></area>
      <area title="BENIN" mc_name="BJ"></area>
      <area title="BERMUDA" mc_name="BM"></area>
      <area title="BHUTAN" mc_name="BT"></area>
      <area title="BOLIVIA" mc_name="BO"></area>
      <area title="BOSNIA AND HERZEGOVINA" mc_name="BA"></area>
      <area title="BOTSWANA" mc_name="BW"></area>
      <area title="BRAZIL" mc_name="BR"></area>
      <area title="BRUNEI DARUSSALAM" mc_name="BN"></area>
      <area title="BULGARIA" mc_name="BG"></area>
      <area title="BURKINA FASO" mc_name="BF"></area>
      <area title="BURUNDI" mc_name="BI"></area>
      <area title="CAMBODIA" mc_name="KH"></area>
      <area title="CAMEROON" mc_name="CM"></area>
      <area title="CANADA" mc_name="CA"></area>
      <area title="CAPE VERDE" mc_name="CV"></area>
      <area title="CENTRAL AFRICAN REPUBLIC" mc_name="CF"></area>
      <area title="CHAD" mc_name="TD"></area>
      <area title="CHILE" mc_name="CL"></area>
      <area title="CHINA" mc_name="CN"></area>
      <area title="COLOMBIA" mc_name="CO"></area>
      <area title="COMOROS" mc_name="KM"></area>
      <area title="REPUBLIC OF CONGO" mc_name="CG"></area>
      <area title="THE DEMOCRATIC REPUBLIC OF THE CONGO" mc_name="CD"></area>
      <area title="COSTA RICA" mc_name="CR"></area>
      <area title="C0TE D\'IVOIRE" mc_name="CI"></area>
      <area title="CROATIA" mc_name="HR"></area>
      <area title="CUBA" mc_name="CU"></area>
      <area title="CYPRUS" mc_name="CY"></area>
      <area title="CZECH REPUBLIC" mc_name="CZ"></area>
      <area title="DENMARK" mc_name="DK"></area>
      <area title="DJIBOUTI" mc_name="DJ"></area>
      <area title="DOMINICA" mc_name="DM"></area>
      <area title="DOMINICAN REPUBLIC" mc_name="DO"></area>
      <area title="ECUADOR" mc_name="EC"></area>
      <area title="EGYPT" mc_name="EG"></area>
      <area title="EL SALVADOR" mc_name="SV"></area>
      <area title="EQUATORIAL GUINEA" mc_name="GQ"></area>
      <area title="ERITREA" mc_name="ER"></area>
      <area title="ESTONIA" mc_name="EE"></area>
      <area title="ETHIOPIA" mc_name="ET"></area>
      <area title="FAEROE ISLANDS" mc_name="FO"></area>
      <area title="FALKLAND ISLANDS" mc_name="FK"></area>
      <area title="FIJI" mc_name="FJ"></area>
      <area title="FINLAND" mc_name="FI"></area>
      <area title="FRANCE" mc_name="FR"></area>
      <area title="FRENCH GUIANA" mc_name="GF"></area>
      <area title="GABON" mc_name="GA"></area>
      <area title="GAMBIA, THE" mc_name="GM"></area>
      <area title="GEORGIA" mc_name="GE"></area>
      <area title="GERMANY" mc_name="DE"></area>
      <area title="GHANA" mc_name="GH"></area>
      <area title="GREECE" mc_name="GR"></area>
      <area title="GREENLAND" mc_name="GL"></area>
      <area title="GRENADA" mc_name="GD"></area>
      <area title="GUADELOUPE" mc_name="GP"></area>
      <area title="GUATEMALA" mc_name="GT"></area>
      <area title="GUINEA" mc_name="GN"></area>
      <area title="GUINEA-BISSAU" mc_name="GW"></area>
      <area title="GUYANA" mc_name="GY"></area>
      <area title="HAITI" mc_name="HT"></area>
      <area title="HONDURAS" mc_name="HN"></area>
      <area title="HONG KONG" mc_name="HK"></area>
      <area title="HUNGARY" mc_name="HU"></area>
      <area title="ICELAND" mc_name="IS"></area>
      <area title="INDIA" mc_name="IN"></area>
      <area title="INDONESIA" mc_name="ID"></area>
      <area title="IRAN" mc_name="IR"></area>
      <area title="IRAQ" mc_name="IQ"></area>
      <area title="IRELAND" mc_name="IE"></area>
      <area title="ISRAEL" mc_name="IL"></area>
      <area title="ITALY" mc_name="IT"></area>
      <area title="JAMAICA" mc_name="JM"></area>
      <area title="JAPAN" mc_name="JP"></area>
      <area title="JORDAN" mc_name="JO"></area>
      <area title="KAZAKHSTAN" mc_name="KZ"></area>
      <area title="KENYA" mc_name="KE"></area>
      <area title="NORTH KOREA" mc_name="KP"></area>
      <area title="SOUTH KOREA" mc_name="KR"></area>
      <area title="KUWAIT" mc_name="KW"></area>
      <area title="KYRGYZSTAN" mc_name="KG"></area>
      <area title="LAO PEOPLE\'S DEMOCRATIC REPUBLIC" mc_name="LA"></area>
      <area title="LATVIA" mc_name="LV"></area>
      <area title="LEBANON" mc_name="LB"></area>
      <area title="LESOTHO" mc_name="LS"></area>
      <area title="LIBERIA" mc_name="LR"></area>
      <area title="LIBYA" mc_name="LY"></area>
      <area title="LIECHTENSTEIN" mc_name="LI"></area>
      <area title="LITHUANIA" mc_name="LT"></area>
      <area title="LUXEMBOURG" mc_name="LU"></area>
      <area title="MACEDONIA" mc_name="MK"></area>
      <area title="MADAGASCAR" mc_name="MG"></area>
      <area title="MALAWI" mc_name="MW"></area>
      <area title="MALAYSIA" mc_name="MY"></area>
      <area title="MALI" mc_name="ML"></area>
      <area title="MALTA" mc_name="MT"></area>
      <area title="MARTINIQUE" mc_name="MQ"></area>
      <area title="MAURITANIA" mc_name="MR"></area>
      <area title="MAURITIUS" mc_name="MU"></area>
      <area title="MEXICO" mc_name="MX"></area>
      <area title="MOLDOVA" mc_name="MD"></area>
      <area title="MONGOLIA" mc_name="MN"></area>
      <area title="MONTENEGRO" mc_name="ME"></area>
      <area title="MONTSERRAT" mc_name="MS"></area>
      <area title="MOROCCO" mc_name="MA"></area>
      <area title="MOZAMBIQUE" mc_name="MZ"></area>
      <area title="MYANMAR" mc_name="MM"></area>
      <area title="NAMIBIA" mc_name="NA"></area>
      <area title="NEPAL" mc_name="NP"></area>
      <area title="NETHERLANDS" mc_name="NL"></area>
      <area title="NEW CALEDONIA" mc_name="NC"></area>
      <area title="NEW ZEALAND" mc_name="NZ"></area>
      <area title="NICARAGUA" mc_name="NI"></area>
      <area title="NIGER" mc_name="NE"></area>
      <area title="NIGERIA" mc_name="NG"></area>
      <area title="NORWAY" mc_name="NO"></area>
      <area title="OMAN" mc_name="OM"></area>
      <area title="PAKISTAN" mc_name="PK"></area>
      <area title="PALAU" mc_name="PW"></area>
      <area title="PALESTINIAN TERRITORIES" mc_name="PS"></area>
      <area title="PANAMA" mc_name="PA"></area>
      <area title="PAPUA NEW GUINEA" mc_name="PG"></area>
      <area title="PARAGUAY" mc_name="PY"></area>
      <area title="PERU" mc_name="PE"></area>
      <area title="PHILIPPINES" mc_name="PH"></area>
      <area title="POLAND" mc_name="PL"></area>
      <area title="PORTUGAL" mc_name="PT"></area>
      <area title="PUERTO RICO" mc_name="PR"></area>
      <area title="QATAR" mc_name="QA"></area>
      <area title="REUNION" mc_name="RE"></area>
      <area title="ROMANIA" mc_name="RO"></area>
      <area title="RUSSIAN FEDERATION" mc_name="RU"></area>
      <area title="RWANDA" mc_name="RW"></area>
      <area title="SAINT KITTS AND NEVIS" mc_name="KN"></area>
      <area title="SAINT LUCIA" mc_name="LC"></area>
      <area title="SAMOA" mc_name="WS"></area>
      <area title="SAO TOME AND PRINCIPE" mc_name="ST"></area>
      <area title="SAUDI ARABIA" mc_name="SA"></area>
      <area title="SENEGAL" mc_name="SN"></area>
      <area title="SERBIA" mc_name="RS"></area>
      <area title="SIERRA LEONE" mc_name="SL"></area>
      <area title="SINGAPORE" mc_name="SG"></area>
      <area title="SLOVAKIA" mc_name="SK"></area>
      <area title="SLOVENIA" mc_name="SI"></area>
      <area title="SOLOMON ISLANDS" mc_name="SB"></area>
      <area title="SOMALIA" mc_name="SO"></area>
      <area title="SOUTH AFRICA" mc_name="ZA"></area>
      <area title="SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS" mc_name="GS"></area>
      <area title="SPAIN" mc_name="ES"></area>
      <area title="SRI LANKA" mc_name="LK"></area>
      <area title="SUDAN" mc_name="SD"></area>
      <area title="SURINAME" mc_name="SR"></area>
      <area title="SVALBARD AND JAN MAYEN" mc_name="SJ"></area>
      <area title="SWAZILAND" mc_name="SZ"></area>
      <area title="SWEDEN" mc_name="SE"></area>
      <area title="SWITZERLAND" mc_name="CH"></area>
      <area title="SYRIAN ARAB REPUBLIC" mc_name="SY"></area>
      <area title="TAIWAN" mc_name="TW"></area>
      <area title="TAJIKISTAN" mc_name="TJ"></area>
      <area title="TANZANIA" mc_name="TZ"></area>
      <area title="THAILAND" mc_name="TH"></area>
      <area title="TIMOR-LESTE" mc_name="TL"></area>
      <area title="TOGO" mc_name="TG"></area>
      <area title="TONGA" mc_name="TO"></area>
      <area title="TRINIDAD AND TOBAGO" mc_name="TT"></area>
      <area title="TUNISIA" mc_name="TN"></area>
      <area title="TURKEY" mc_name="TR"></area>
      <area title="TURKMENISTAN" mc_name="TM"></area>
      <area title="TURKS AND CAICOS ISLANDS" mc_name="TC"></area>
      <area title="UGANDA" mc_name="UG"></area>
      <area title="UKRAINE" mc_name="UA"></area>
      <area title="UNITED ARAB EMIRATES" mc_name="AE"></area>
      <area title="UNITED KINGDOM" mc_name="GB"></area>
      <area title="UNITED STATES" mc_name="US"></area>
      <area title="URUGUAY" mc_name="UY"></area>
      <area title="UZBEKISTAN" mc_name="UZ"></area>
      <area title="VANUATU" mc_name="VU"></area>
      <area title="VENEZUELA" mc_name="VE"></area>
      <area title="VIET NAM" mc_name="VN"></area>
      <area title="VIRGIN ISLANDS, BRITISH" mc_name="VG"></area>
      <area title="WESTERN SAHARA" mc_name="EH"></area>
      <area title="YEMEN" mc_name="YE"></area>
      <area title="ZAMBIA" mc_name="ZM"></area>
      <area title="ZIMBABWE" mc_name="ZW"></area>
  </areas>'
  xml.lines do
    @flights.each do |f|
      xml.line :lat=>"#{f.from_airport.latitude},#{f.to_airport.latitude}", :long=>"#{f.from_airport.longitude},#{f.to_airport.longitude}", :color => "FF0000", :width => f.kg_of_co2/2500.0.to_i
    end
  end
  xml.movies do
    xml << ' zoom="274%" zoom_x="-58.11%" zoom_y="-78.22%">'
    @flights.each do |f|
      xml.movie :file=>"target", :title=>f.from_airport.name, :lat=>f.from_airport.latitude, :long=>f.from_airport.longitude, :fixed_size=>"true", :height => 5, :width => 5, :color => "000000", :width=>"16", :height=>"16", :fixed_size=>"true"
      xml.movie :file=>"target", :title=>f.to_airport.name, :lat=>f.to_airport.latitude, :long=>f.to_airport.longitude, :fixed_size=>"true", :height => 5, :width => 5, :color => "000000", :width=>"16", :height=>"16", :fixed_size=>"true"
    end
  end
end