(function(){var _1=20;var _2=0;var _3=30000;var _4=null;var _5=null;var _6=null;var _7=0;var _8=0;var _9=location.hash;var _a="#_";var _b=[];var _c=0;var _d;var _e=false;var _f="portrait";var _10="landscape";window.iui={logging:false,busy:false,animOn:true,ajaxErrHandler:null,httpHeaders:{"X-Requested-With":"XMLHttpRequest"},showPage:function(_11,_12){if(_11){if(_11==_5){log("page = currentPage = "+_11.id);iui.busy=false;return;}if(_6){_6.removeAttribute("selected");sendEvent("blur",_6);_6=null;}if(hasClass(_11,"dialog")){iui.busy=false;sendEvent("focus",_11);showDialog(_11);}else{sendEvent("load",_11);var _13=_5;sendEvent("blur",_5);_5=_11;sendEvent("focus",_11);if(_13){setTimeout(slidePages,0,_13,_11,_12);}else{updatePage(_11,_13);}}}},showPageById:function(_14){var _15=$(_14);if(_15){if(!iui.busy){iui.busy=true;var _16=_b.indexOf(_14);var _17=_16!=-1;if(_17){_b.splice(_16);}iui.showPage(_15,_17);}}},goBack:function(){if(!iui.busy){iui.busy=true;_b.pop();var _18=_b.pop();var _19=$(_18);iui.showPage(_19,true);}},replacePage:function(_1a){var _1b=$(_1a);if(_1b){if(!iui.busy){iui.busy=true;var _1c=_b.indexOf(_1a);var _1d=_1c!=-1;if(_1d){log("error: can't replace page with ancestor");}_b.pop();iui.showPage(_1b,false);}}},showPageByHrefExt:function(_1e,_1f,_20,_21,cb){if(!iui.busy){iui.busy=true;iui.showPageByHref(_1e,_1f,_20,_21,cb);}},showPageByHref:function(_23,_24,_25,_26,cb){function spbhCB(xhr){log("xhr.readyState = "+xhr.readyState);if(xhr.readyState==4){if((xhr.status==200||xhr.status==0)&&!xhr.aborted){var _29=document.createElement("div");_29.innerHTML=xhr.responseText;sendEvent("beforeinsert",document.body,{fragment:_29});if(_26){replaceElementWithFrag(_26,_29);iui.busy=false;}else{iui.insertPages(_29);}}else{iui.busy=false;if(iui.ajaxErrHandler){iui.ajaxErrHandler("Error contacting server, please try again later");}}if(cb){setTimeout(cb,1000,true);}}}iui.ajax(_23,_24,_25,spbhCB);},ajax:function(url,_2b,_2c,cb){var xhr=new XMLHttpRequest();_2c=_2c?_2c.toUpperCase():"GET";if(_2b&&_2c=="GET"){url=url+"?"+iui.param(_2b);}xhr.open(_2c,url,true);if(cb){xhr.onreadystatechange=function(){cb(xhr);};}var _2f=null;if(_2b&&_2c!="GET"){xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");_2f=iui.param(_2b);}for(var _30 in iui.httpHeaders){xhr.setRequestHeader(_30,iui.httpHeaders[_30]);}xhr.send(_2f);xhr.requestTimer=setTimeout(ajaxTimeout,_3);return xhr;function ajaxTimeout(){try{xhr.abort();xhr.aborted=true;}catch(err){log(err);}}},param:function(o){var s=[];for(var key in o){var _34=o[key];if(typeof (_34)=="object"&&typeof (_34.length)=="number"){for(var i=0;i<_34.length;i++){s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(_34[i]);}}else{s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(_34);}}return s.join("&").replace(/%20/g,"+");},insertPages:function(_36){var _37=_36.childNodes;var _38;for(var i=0;i<_37.length;++i){var _3a=_37[i];if(_3a.nodeType==1){if(!_3a.id){_3a.id="__"+(++_c)+"__";}var _3b=$(_3a.id);var _3c;if(_3b){_3b.parentNode.replaceChild(_3a,_3b);_3c=$(_3a.id);}else{_3c=document.body.appendChild(_3a);}sendEvent("afterinsert",document.body,{insertedNode:_3c});if(_3a.getAttribute("selected")=="true"||!_38){_38=_3a;}--i;}}sendEvent("afterinsertend",document.body,{fragment:_36});if(_38){iui.showPage(_38);}},getSelectedPage:function(){for(var _3d=document.body.firstChild;_3d;_3d=_3d.nextSibling){if(_3d.nodeType==1&&_3d.getAttribute("selected")=="true"){return _3d;}}},getAllViews:function(){return document.querySelectorAll("body > *:not(.toolbar)");},isNativeUrl:function(_3e){for(var i=0;i<iui.nativeUrlPatterns.length;i++){if(_3e.match(iui.nativeUrlPatterns[i])){return true;}}return false;},nativeUrlPatterns:[new RegExp("^http://maps.google.com/maps?"),new RegExp("^mailto:"),new RegExp("^tel:"),new RegExp("^http://www.youtube.com/watch\\?v="),new RegExp("^http://www.youtube.com/v/"),new RegExp("^javascript:"),new RegExp("^sms:"),new RegExp("^callto:")],hasClass:function(_40,_41){var re=new RegExp("(^|\\s)"+_41+"($|\\s)");return re.exec(_40.getAttribute("class"))!=null;},addClass:function(_43,_44){if(!iui.hasClass(_43,_44)){_43.className+=" "+_44;}},removeClass:function(_45,_46){if(iui.hasClass(_45,_46)){var reg=new RegExp("(\\s|^)"+_46+"(\\s|$)");_45.className=_45.className.replace(reg," ");}}};addEventListener("load",function(_48){var _49=iui.getSelectedPage();var _4a=getPageFromLoc();if(_49){_4=_49;iui.showPage(_49);}if(_4a&&(_4a!=_49)){iui.showPage(_4a);}setTimeout(preloadImages,0);if(typeof window.onorientationchange=="object"){window.onorientationchange=orientChangeHandler;_e=true;setTimeout(orientChangeHandler,0);}setTimeout(checkOrientAndLocation,0);_d=setInterval(checkOrientAndLocation,300);},false);addEventListener("unload",function(_4b){return;},false);addEventListener("click",function(_4c){var _4d=findParent(_4c.target,"a");if(_4d){function unselect(){_4d.removeAttribute("selected");}if(_4d.href&&_4d.hash&&_4d.hash!="#"&&!_4d.target){followAnchor(_4d);}else{if(_4d==$("backButton")){iui.goBack();}else{if(_4d.getAttribute("type")=="submit"){var _4e=findParent(_4d,"form");if(_4e.target=="_self"){if(typeof _4e.onsubmit=="function"){if(_4e.onsubmit()==true){_4e.submit();}}else{_4e.submit();}return;}submitForm(_4e);}else{if(_4d.getAttribute("type")=="cancel"){cancelDialog(findParent(_4d,"form"));}else{if(_4d.target=="_replace"){followAjax(_4d,_4d);}else{if(iui.isNativeUrl(_4d.href)){return;}else{if(_4d.target=="_webapp"){location.href=_4d.href;}else{if(!_4d.target&&_4d.href){followAjax(_4d,null);}else{return;}}}}}}}}_4c.preventDefault();}},true);addEventListener("click",function(_4f){var div=findParent(_4f.target,"div");if(div&&hasClass(div,"toggle")){div.setAttribute("toggled",div.getAttribute("toggled")!="true");_4f.preventDefault();}},true);addEventListener("click",function(_51){var _52=findParent(_51.target,"input");if(_52&&_52.type=="submit"){_52.setAttribute("submitvalue",_52.value);}},true);addEventListener("submit",function(_53){var _54=_53.target;if(_54.target!="_self"){_53.preventDefault();submitForm(_54);}},true);function followAnchor(_55){function unselect(){_55.removeAttribute("selected");}if(!iui.busy){iui.busy=true;_55.setAttribute("selected","true");iui.showPage($(_55.hash.substr(1)));setTimeout(unselect,500);}}function followAjax(_56,_57){function unselect(){_56.removeAttribute("selected");}if(!iui.busy){iui.busy=true;_56.setAttribute("selected","progress");iui.showPageByHref(_56.href,null,"GET",_57,unselect);}}function sendEvent(_58,_59,_5a){if(_59){var _5b=document.createEvent("UIEvent");_5b.initEvent(_58,false,false);if(_5a){for(i in _5a){_5b[i]=_5a[i];}}_59.dispatchEvent(_5b);}}function getPageFromLoc(){var _5c;var _5d=location.hash.match(/#_([^\?_]+)/);if(_5d){_5c=_5d[1];}if(_5c){_5c=$(_5c);}return _5c;}function orientChangeHandler(){var _5e=window.orientation;switch(_5e){case 0:setOrientation(_f);break;case 90:case -90:setOrientation(_10);break;}}function checkOrientAndLocation(){if(!_e){if((window.innerWidth!=_7)||(window.innerHeight!=_8)){_7=window.innerWidth;_8=window.innerHeight;var _5f=(_7<_8)?_f:_10;setOrientation(_5f);}}if(location.hash!=_9){var _60=location.hash.substr(_a.length);if((_60=="")&&_4){_60=_4.id;}iui.showPageById(_60);}}function setOrientation(_61){document.body.setAttribute("orient",_61);if(_61==_f){iui.removeClass(document.body,_10);iui.addClass(document.body,_f);}else{if(_61==_10){iui.removeClass(document.body,_f);iui.addClass(document.body,_10);}else{iui.removeClass(document.body,_f);iui.removeClass(document.body,_10);}}setTimeout(scrollTo,100,0,1);}function showDialog(_62){_6=_62;_62.setAttribute("selected","true");if(hasClass(_62,"dialog")){showForm(_62);}}function showForm(_63){_63.addEventListener("click",function(_64){},true);}function cancelDialog(_65){_65.removeAttribute("selected");}function updatePage(_66,_67){if(!_66.id){_66.id="__"+(++_c)+"__";}_9=_a+_66.id;if(!_67){location.replace(_9);}else{location.assign(_9);}_b.push(_66.id);var _68=$("pageTitle");if(_66.title){_68.innerHTML=_66.title;}var _69=_66.getAttribute("ttlclass");_68.className=_69?_69:"";if(_66.localName.toLowerCase()=="form"){showForm(_66);}var _6a=$("backButton");if(_6a){var _6b=$(_b[_b.length-2]);if(_6b&&!_66.getAttribute("hideBackButton")){_6a.style.display="inline";_6a.innerHTML=_6b.title?_6b.title:"Back";var _6c=_6b.getAttribute("bbclass");_6a.className=(_6c)?"button "+_6c:"button";}else{_6a.style.display="none";}}iui.busy=false;}function slidePages(_6d,_6e,_6f){var _70=(_6f?_6d:_6e).getAttribute("axis");clearInterval(_d);sendEvent("beforetransition",_6d,{out:true});sendEvent("beforetransition",_6e,{out:false});if(canDoSlideAnim()&&_70!="y"){slide2(_6d,_6e,_6f,slideDone);}else{slide1(_6d,_6e,_6f,_70,slideDone);}function slideDone(){if(!hasClass(_6e,"dialog")){_6d.removeAttribute("selected");}_d=setInterval(checkOrientAndLocation,300);setTimeout(updatePage,0,_6e,_6d);_6d.removeEventListener("webkitTransitionEnd",slideDone,false);sendEvent("aftertransition",_6d,{out:true});sendEvent("aftertransition",_6e,{out:false});if(_6f){sendEvent("unload",_6d);}}}function canDoSlideAnim(){return (iui.animOn)&&(typeof WebKitCSSMatrix=="object");}function slide1(_71,_72,_73,_74,cb){if(_74=="y"){(_73?_71:_72).style.top="100%";}else{_72.style.left="100%";}scrollTo(0,1);_72.setAttribute("selected","true");var _76=100;slide();var _77=setInterval(slide,_2);function slide(){_76-=_1;if(_76<=0){_76=0;clearInterval(_77);cb();}if(_74=="y"){_73?_71.style.top=(100-_76)+"%":_72.style.top=_76+"%";}else{_71.style.left=(_73?(100-_76):(_76-100))+"%";_72.style.left=(_73?-_76:_76)+"%";}}}function slide2(_78,_79,_7a,cb){_79.style.webkitTransitionDuration="0ms";var _7c="translateX("+(_7a?"-":"")+window.innerWidth+"px)";var _7d="translateX("+(_7a?"100%":"-100%")+")";_79.style.webkitTransform=_7c;_79.setAttribute("selected","true");_79.style.webkitTransitionDuration="";function startTrans(){_78.style.webkitTransform=_7d;_79.style.webkitTransform="translateX(0%)";}_78.addEventListener("webkitTransitionEnd",cb,false);setTimeout(startTrans,0);}function preloadImages(){var _7e=document.createElement("div");_7e.id="preloader";document.body.appendChild(_7e);}function submitForm(_7f){if(!iui.busy){iui.busy=true;iui.addClass(_7f,"progress");iui.showPageByHref(_7f.getAttribute("action"),encodeForm(_7f),_7f.hasAttribute("method")?_7f.getAttribute("method"):"GET",null,clear);}function clear(){iui.removeClass(_7f,"progress");}}function encodeForm(_80){function encode(_81){for(var i=0;i<_81.length;++i){log("input["+i+"]: "+_81[i].name+" = "+_81[i].value);if(_81[i].name){var _83=_81[i];if(_83.getAttribute("type")=="checkbox"&&!_83.checked||_83.getAttribute("type")=="radio"&&!_83.checked||_83.disabled){continue;}if(_83.getAttribute("type")=="submit"){if(_83.getAttribute("submitvalue")){_83.removeAttribute("submitvalue");}else{continue;}}var _84=args[_83.name];if(_84===undefined){args[_83.name]=_83.value;}else{if(_84 instanceof Array){_84.push(_83.value);}else{args[_83.name]=[_84,_83.value];}}}}}var _85={};encode(_80.getElementsByTagName("input"));encode(_80.getElementsByTagName("textarea"));encode(_80.getElementsByTagName("select"));encode(_80.getElementsByTagName("button"));return _85;}function findParent(_86,_87){while(_86&&(_86.nodeType!=1||_86.localName.toLowerCase()!=_87)){_86=_86.parentNode;}return _86;}function hasClass(_88,_89){return iui.hasClass(_88,_89);}function replaceElementWithFrag(_8a,_8b){var _8c=_8a.parentNode;var _8d=_8a;while(_8c.parentNode!=document.body){_8c=_8c.parentNode;_8d=_8d.parentNode;}_8c.removeChild(_8d);var _8e;while(_8b.firstChild){_8e=_8c.appendChild(_8b.firstChild);sendEvent("afterinsert",document.body,{insertedNode:_8e});}sendEvent("afterinsertend",document.body,{fragment:_8b});}function $(id){return document.getElementById(id);}function log(){if((window.console!=undefined)&&iui.logging){console.log.apply(console,arguments);}}})();